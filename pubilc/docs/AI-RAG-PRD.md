# ESG ë³´ê³ ì„œ ìœ¤ë¬¸ ê¸°ëŠ¥ PRD (RAG ê¸°ë°˜)

**ë²„ì „:** 1.0  
**ì‘ì„±ì¼:** 2025-09-30  
**ëŒ€ìƒ ìŠ¤í”„ë¦°íŠ¸:** Sprint 7  
**ì˜ˆìƒ ê¸°ê°„:** 1ì£¼ (7ì¼)  
**ì¼ì¼ ì‘ì—… ì‹œê°„:** 8ì‹œê°„ (ì£¼ë§ í¬í•¨)

---

## ğŸ“‹ ëª©ì°¨

1. [ê°œìš”](#1-ê°œìš”)
2. [ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­](#2-ê¸°ëŠ¥-ìš”êµ¬ì‚¬í•­)
3. [ê¸°ìˆ  ìŠ¤í™](#3-ê¸°ìˆ -ìŠ¤í™)
4. [ê°œë°œ ê³„íš](#4-ê°œë°œ-ê³„íš)
5. [í’ˆì§ˆ ë³´ì¦](#5-í’ˆì§ˆ-ë³´ì¦)
6. [ë¶€ë¡](#6-ë¶€ë¡)

---

## 1. ê°œìš”

### 1.1 í”„ë¡œì íŠ¸ ë°°ê²½

í˜„ì¬ ESG SIP(SaaS Intelligence Platform)ëŠ” 18ê°œ ê¸°ì—…ì˜ ë‰´ìŠ¤ë¥¼ ìˆ˜ì§‘í•˜ê³  íŠ¸ë Œë“œë¥¼ ë¶„ì„í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ë²ˆ Sprint 7ì—ì„œëŠ” **ESG ì§€ì†ê°€ëŠ¥ê²½ì˜ë³´ê³ ì„œ ìœ¤ë¬¸(Polishing) ê¸°ëŠ¥**ì„ ì¶”ê°€í•˜ì—¬, ESG ë‹´ë‹¹ìê°€ ë³´ê³ ì„œ ì‘ì„± ì‹œ AIì˜ ë„ì›€ì„ ë°›ì•„ ì „ë¬¸ì„±ê³¼ í’ˆì§ˆì„ ë†’ì¼ ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

### 1.2 í•µì‹¬ ê°€ì¹˜ ì œì•ˆ

- **ì‹œê°„ ì ˆì•½**: ìˆ˜ì‘ì—… ìœ¤ë¬¸ 3ì‹œê°„ â†’ AI ìë™ ìœ¤ë¬¸ 2ë¶„
- **í’ˆì§ˆ í–¥ìƒ**: GRI Standards ê¸°ì¤€ ì¤€ìˆ˜ë„ 80% â†’ 90%
- **ë„ë©”ì¸ íŠ¹í™”**: RAG ê¸°ë°˜ìœ¼ë¡œ ESG ì „ë¬¸ ì§€ì‹ í†µí•©
- **ì‹¤ë¬´ í™œìš©**: Account Managerì™€ Product Managerê°€ ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥

### 1.3 ì„±ê³µ ì§€í‘œ (Sprint 7 ì¢…ë£Œ ì‹œ)

| ì§€í‘œ | ëª©í‘œ | ì¸¡ì • ë°©ë²• |
|------|------|-----------|
| ìœ¤ë¬¸ ì •í™•ë„ | 80% ì´ìƒ | 10ê°œ ìƒ˜í”Œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ í†µê³¼ìœ¨ |
| ì‘ë‹µ ì†ë„ | 3ì´ˆ ì´ë‚´ | API í‰ê·  ì‘ë‹µ ì‹œê°„ |
| RAG ê²€ìƒ‰ ì •í™•ë„ | ìƒìœ„ 3ê°œ ë¬¸ì„œ ê´€ë ¨ì„± 70% | ìˆ˜ë™ ê²€ì¦ |
| UI/UX ì™„ì„±ë„ | Before/After ë¹„êµ ê°€ëŠ¥ | ê¸°ëŠ¥ ë™ì‘ í™•ì¸ |

### 1.4 Out of Scope (ì´ë²ˆ ìŠ¤í”„ë¦°íŠ¸ ì œì™¸)

- âŒ PDF/DOCX íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥
- âŒ ë‹¤êµ­ì–´ ë²ˆì—­ (í•œâ†”ì˜)
- âŒ í˜‘ì—… ê¸°ëŠ¥ (ëŒ“ê¸€, ë²„ì „ ê´€ë¦¬)
- âŒ PDF ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥
- âŒ í…œí”Œë¦¿ ê¸°ë°˜ ë³´ê³ ì„œ ìë™ ìƒì„±

---

## 2. ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

### 2.1 RAG ì¸í”„ë¼ êµ¬ì¶•

#### **Task 1: ì§€ì‹ ë² ì´ìŠ¤ ìˆ˜ì§‘ ë° ì „ì²˜ë¦¬**

**ëª©í‘œ:** ESG ê´€ë ¨ ê³µê°œ ë¬¸ì„œë¥¼ ìˆ˜ì§‘í•˜ê³  RAGì— ì í•©í•œ í˜•íƒœë¡œ ê°€ê³µ

**ìƒì„¸ ì‘ì—…:**

1. **ë¬¸ì„œ ìˆ˜ì§‘ (6-8ê°œ)**
   - GRI Standards 2021 (PDF, ê³µì‹ ì‚¬ì´íŠ¸)
   - í™˜ê²½ë¶€ K-ESG ê°€ì´ë“œë¼ì¸ (PDF)
   - TCFD ê¶Œê³ ì•ˆ (ì˜ë¬¸ â†’ í•œê¸€ ìš”ì•½ë³¸ ì‚¬ìš©)
   - ìš°ìˆ˜ ESG ë³´ê³ ì„œ 5ê°œ:
     - ì‚¼ì„±ì „ì ì§€ì†ê°€ëŠ¥ê²½ì˜ë³´ê³ ì„œ 2023
     - SKí•˜ì´ë‹‰ìŠ¤ ESG ë¦¬í¬íŠ¸ 2023
     - ë„¤ì´ë²„ ESG ë¦¬í¬íŠ¸ 2023
     - LGí™”í•™ ì§€ì†ê°€ëŠ¥ê²½ì˜ë³´ê³ ì„œ 2023
     - í˜„ëŒ€ìë™ì°¨ ì§€ì†ê°€ëŠ¥ì„± ë³´ê³ ì„œ 2023

2. **PDF â†’ í…ìŠ¤íŠ¸ ë³€í™˜**
   ```python
   # ë¼ì´ë¸ŒëŸ¬ë¦¬: PyPDF2 ë˜ëŠ” pdfplumber
   # ì¶œë ¥: ê° ë¬¸ì„œë‹¹ .txt íŒŒì¼
   ```

3. **í…ìŠ¤íŠ¸ ì „ì²˜ë¦¬**
   - ë¶ˆí•„ìš”í•œ í—¤ë”/í‘¸í„° ì œê±°
   - í˜ì´ì§€ ë²ˆí˜¸ ì œê±°
   - í‘œ/ê·¸ë˜í”„ ì„¤ëª… ì •ë¦¬
   - í•œê¸€ ì¸ì½”ë”© í™•ì¸ (UTF-8)

4. **ë©”íƒ€ë°ì´í„° ì¶”ê°€**
   ```json
   {
     "source": "GRI Standards 2021",
     "type": "standard",
     "section": "GRI 305 (Emissions)",
     "language": "ko"
   }
   ```

**ì™„ë£Œ ê¸°ì¤€:**
- [ ] 6-8ê°œ ë¬¸ì„œ ìˆ˜ì§‘ ì™„ë£Œ
- [ ] í…ìŠ¤íŠ¸ ë³€í™˜ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± (`scripts/convert_pdfs.py`)
- [ ] ì „ì²˜ë¦¬ëœ í…ìŠ¤íŠ¸ íŒŒì¼ ì €ì¥ (`data/knowledge_base/`)
- [ ] ë©”íƒ€ë°ì´í„° JSON íŒŒì¼ ìƒì„±

**ì˜ˆìƒ ì‹œê°„:** 8ì‹œê°„ (Day 1)

---

#### **Task 2: ì„ë² ë”© ë° ë²¡í„° DB êµ¬ì¶•**

**ëª©í‘œ:** í…ìŠ¤íŠ¸ë¥¼ ë²¡í„°ë¡œ ë³€í™˜í•˜ê³  FAISS ë²¡í„° ìŠ¤í† ì–´ ìƒì„±

**ìƒì„¸ ì‘ì—…:**

1. **í…ìŠ¤íŠ¸ ì²­í‚¹ (Chunking)**
   ```python
   # LangChain RecursiveCharacterTextSplitter ì‚¬ìš©
   chunk_size = 1000  # í† í° ë‹¨ìœ„
   chunk_overlap = 200  # ì»¨í…ìŠ¤íŠ¸ ìœ ì§€
   ```

2. **ì„ë² ë”© ëª¨ë¸ ë‹¤ìš´ë¡œë“œ**
   ```python
   # HuggingFace: jhgan/ko-sroberta-multitask
   # ëª¨ë¸ í¬ê¸°: ~400MB
   # ë¡œì»¬ ìºì‹±: ~/.cache/huggingface/
   ```

3. **ë²¡í„° ì„ë² ë”© ìƒì„±**
   - ê° ì²­í¬ë¥¼ 768ì°¨ì› ë²¡í„°ë¡œ ë³€í™˜
   - ë°°ì¹˜ ì²˜ë¦¬ (ë©”ëª¨ë¦¬ íš¨ìœ¨)

4. **FAISS ì¸ë±ìŠ¤ ìƒì„±**
   ```python
   # FAISS IndexFlatL2 ì‚¬ìš©
   # ì¸ë±ìŠ¤ ì €ì¥: data/vectorstore/faiss_index
   # ë©”íƒ€ë°ì´í„° ì €ì¥: data/vectorstore/metadata.pkl
   ```

5. **ê²€ìƒ‰ í…ŒìŠ¤íŠ¸**
   - ìƒ˜í”Œ ì¿¼ë¦¬ 10ê°œë¡œ ê²€ìƒ‰ í’ˆì§ˆ í™•ì¸
   - Top-K (k=3) ê´€ë ¨ì„± ìˆ˜ë™ ê²€ì¦

**ì™„ë£Œ ê¸°ì¤€:**
- [ ] ì²­í‚¹ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± (`backend/src/reports/rag/chunking.py`)
- [ ] ì„ë² ë”© ìƒì„± ìŠ¤í¬ë¦½íŠ¸ (`backend/src/reports/rag/embeddings.py`)
- [ ] FAISS ì¸ë±ìŠ¤ íŒŒì¼ ìƒì„± (~500MB)
- [ ] ê²€ìƒ‰ í…ŒìŠ¤íŠ¸ í†µê³¼ (10ê°œ ì¿¼ë¦¬ ì¤‘ 7ê°œ ì´ìƒ ì í•©)

**ì˜ˆìƒ ì‹œê°„:** 10ì‹œê°„ (Day 2 ì „ì²´)

---

#### **Task 3: RAG íŒŒì´í”„ë¼ì¸ í†µí•©**

**ëª©í‘œ:** ë²¡í„° ê²€ìƒ‰ + LLM í˜¸ì¶œì„ ì—°ê²°í•˜ëŠ” RAG ì²´ì¸ êµ¬í˜„

**ìƒì„¸ ì‘ì—…:**

1. **Retriever êµ¬í˜„**
   ```python
   # backend/src/reports/rag/retriever.py
   class FAISSRetriever:
       def __init__(self, index_path: str):
           # FAISS ì¸ë±ìŠ¤ ë¡œë“œ
           
       async def search(self, query: str, k: int = 3) -> List[Document]:
           # ìœ ì‚¬ë„ ê²€ìƒ‰
           # ë©”íƒ€ë°ì´í„°ì™€ í•¨ê»˜ ë°˜í™˜
   ```

2. **LLM í†µí•© (Gemini 1.5 Flash)**
   ```python
   # backend/src/reports/rag/llm.py
   from langchain_google_genai import ChatGoogleGenerativeAI
   
   llm = ChatGoogleGenerativeAI(
       model="gemini-1.5-flash",
       temperature=0.1,
       google_api_key=settings.GEMINI_API_KEY
   )
   ```

3. **RAG ì²´ì¸ êµ¬ì„±**
   ```python
   # backend/src/reports/rag/chain.py
   from langchain.chains import RetrievalQA
   
   qa_chain = RetrievalQA.from_chain_type(
       llm=llm,
       chain_type="stuff",
       retriever=retriever.as_retriever(search_kwargs={"k": 3})
   )
   ```

4. **í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ì„¤ê³„**
   ```python
   # backend/src/reports/prompts.py
   POLISH_PROMPT = """
   ë‹¹ì‹ ì€ GRI Standards ì „ë¬¸ê°€ì…ë‹ˆë‹¤.
   
   ì°¸ê³  ìë£Œ:
   {context}
   
   ë‹¤ìŒ í…ìŠ¤íŠ¸ë¥¼ ESG ë³´ê³ ì„œ ê¸°ì¤€ì— ë§ê²Œ ê°œì„ í•˜ì„¸ìš”:
   {text}
   
   ê°œì„  ì‚¬í•­:
   1. ì •ëŸ‰ ì§€í‘œ ì¶”ê°€ (êµ¬ì²´ì  ìˆ˜ì¹˜)
   2. GRI í‘œì¤€ ìš©ì–´ ì‚¬ìš©
   3. ì´í•´ê´€ê³„ì ê´€ì  í¬í•¨
   4. ì „ë…„ ëŒ€ë¹„ ë¹„êµ ë°ì´í„° ì œì•ˆ
   
   JSON í˜•ì‹ìœ¼ë¡œ ë‹µë³€:
   {{
       "polished_text": "ê°œì„ ëœ í…ìŠ¤íŠ¸",
       "changes_made": ["ë³€ê²½ì‚¬í•­ 1", "ë³€ê²½ì‚¬í•­ 2"],
       "gri_standards": ["GRI 305-1", "GRI 305-2"],
       "suggestions": ["ì¶”ê°€ ê°œì„  ì œì•ˆ"]
   }}
   """
   ```

**ì™„ë£Œ ê¸°ì¤€:**
- [ ] Retriever í´ë˜ìŠ¤ êµ¬í˜„ ë° í…ŒìŠ¤íŠ¸
- [ ] LLM í†µí•© ë° API í‚¤ ì„¤ì •
- [ ] RAG ì²´ì¸ ë™ì‘ í™•ì¸
- [ ] í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ 3ê°œ ì‘ì„± (í™˜ê²½/ì‚¬íšŒ/ê±°ë²„ë„ŒìŠ¤)

**ì˜ˆìƒ ì‹œê°„:** 10ì‹œê°„ (Day 3 ì „ì²´)

---

### 2.2 ë°±ì—”ë“œ API ê°œë°œ

#### **Task 4: `reports` ë„ë©”ì¸ ìƒì„±**

**ëª©í‘œ:** ë³´ê³ ì„œ ê´€ë ¨ ë„ë©”ì¸ êµ¬ì¡° ìƒì„±

**ë””ë ‰í† ë¦¬ êµ¬ì¡°:**
```
backend/src/reports/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ models.py              # SQLAlchemy ëª¨ë¸
â”œâ”€â”€ schemas.py             # Pydantic ìŠ¤í‚¤ë§ˆ
â”œâ”€â”€ service.py             # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”œâ”€â”€ router.py              # API ì—”ë“œí¬ì¸íŠ¸
â”œâ”€â”€ dependencies.py        # DI ì˜ì¡´ì„±
â”œâ”€â”€ exceptions.py          # ì»¤ìŠ¤í…€ ì˜ˆì™¸
â”œâ”€â”€ prompts.py             # í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿
â”œâ”€â”€ rag/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ embeddings.py      # ì„ë² ë”© ìƒì„±
â”‚   â”œâ”€â”€ vectorstore.py     # FAISS ê´€ë¦¬
â”‚   â”œâ”€â”€ retriever.py       # ê²€ìƒ‰ ë¡œì§
â”‚   â”œâ”€â”€ chain.py           # RAG ì²´ì¸
â”‚   â””â”€â”€ config.py          # RAG ì„¤ì •
â””â”€â”€ utils.py               # ìœ í‹¸ë¦¬í‹°
```

**ëª¨ë¸ ì„¤ê³„ (models.py):**
```python
class Report(Base):
    __tablename__ = "reports"
    
    id: Mapped[int] = mapped_column(primary_key=True)
    user_id: Mapped[int] = mapped_column(ForeignKey("users.id"))
    title: Mapped[str] = mapped_column(String(255))
    section_type: Mapped[str] = mapped_column(String(50))  # E/S/G
    original_text: Mapped[str] = mapped_column(Text)
    polished_text: Mapped[str] = mapped_column(Text, nullable=True)
    quality_score: Mapped[float] = mapped_column(Float, nullable=True)
    changes_summary: Mapped[dict] = mapped_column(JSONB, nullable=True)
    created_at: Mapped[datetime] = mapped_column(default=func.now())
    updated_at: Mapped[datetime] = mapped_column(default=func.now(), onupdate=func.now())
```

**ìŠ¤í‚¤ë§ˆ ì„¤ê³„ (schemas.py):**
```python
class PolishRequest(BaseModel):
    text: str = Field(..., min_length=50, max_length=10000)
    section_type: Literal["environmental", "social", "governance"]
    
class PolishResponse(BaseModel):
    polished_text: str
    changes_made: List[str]
    gri_standards: List[str]
    suggestions: List[str]
    quality_score: float
```

**ì™„ë£Œ ê¸°ì¤€:**
- [ ] ë””ë ‰í† ë¦¬ êµ¬ì¡° ìƒì„±
- [ ] models.py ì‘ì„± ë° ë§ˆì´ê·¸ë ˆì´ì…˜
- [ ] schemas.py ì‘ì„± (5ê°œ ì´ìƒ ìŠ¤í‚¤ë§ˆ)
- [ ] ê¸°ë³¸ ì˜ˆì™¸ í´ë˜ìŠ¤ ì •ì˜

**ì˜ˆìƒ ì‹œê°„:** 4ì‹œê°„ (Day 4 ì˜¤ì „)

---

#### **Task 5: ìœ¤ë¬¸ API ì—”ë“œí¬ì¸íŠ¸**

**ëª©í‘œ:** `/api/reports/polish` POST ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„

**API ìŠ¤í™:**

**ìš”ì²­:**
```http
POST /api/reports/polish
Content-Type: application/json
Authorization: Bearer 

{
  "text": "ìš°ë¦¬ íšŒì‚¬ëŠ” íƒ„ì†Œë¥¼ ì¤„ì´ë ¤ê³  ë…¸ë ¥í•˜ê³  ìˆìŠµë‹ˆë‹¤.",
  "section_type": "environmental"
}
```

**ì‘ë‹µ:**
```json
{
  "polished_text": "ë‹¹ì‚¬ëŠ” 2024ë…„ ê¸°ì¤€ Scope 1+2 ì˜¨ì‹¤ê°€ìŠ¤ ë°°ì¶œëŸ‰ì„ ì „ë…„ ëŒ€ë¹„ 15% ê°ì¶•í•˜ì˜€ìœ¼ë©°, 2030ë…„ê¹Œì§€ íƒ„ì†Œì¤‘ë¦½ì„ ë‹¬ì„±í•˜ê¸° ìœ„í•´ ì¬ìƒì—ë„ˆì§€ ì „í™˜ìœ¨ì„ í˜„ì¬ 30%ì—ì„œ 80%ë¡œ í™•ëŒ€í•  ê³„íšì…ë‹ˆë‹¤.",
  "changes_made": [
    "ëª¨í˜¸í•œ í‘œí˜„ 'íƒ„ì†Œë¥¼ ì¤„ì„' â†’ êµ¬ì²´ì  ìˆ˜ì¹˜ '15% ê°ì¶•'",
    "ëª©í‘œ ì—°ë„ ì¶”ê°€ '2030ë…„'",
    "ì •ëŸ‰ ì§€í‘œ ì¶”ê°€ 'Scope 1+2 ë°°ì¶œëŸ‰'"
  ],
  "gri_standards": ["GRI 305-1", "GRI 305-2"],
  "suggestions": [
    "Scope 3 ë°°ì¶œëŸ‰ ë°ì´í„° ì¶”ê°€ ê¶Œì¥",
    "ì¬ìƒì—ë„ˆì§€ ì „í™˜ ë¡œë“œë§µ ìƒì„¸í™” í•„ìš”"
  ],
  "quality_score": 85.5
}
```

**ì„œë¹„ìŠ¤ ë¡œì§ (service.py):**
```python
class ReportService:
    def __init__(self, rag_chain, db: AsyncSession):
        self.rag_chain = rag_chain
        self.db = db
    
    async def polish_text(
        self, 
        text: str, 
        section_type: str,
        user_id: int
    ) -> PolishResponse:
        # 1. RAG ê²€ìƒ‰
        relevant_docs = await self.rag_chain.retrieve(text)
        
        # 2. í”„ë¡¬í”„íŠ¸ êµ¬ì„±
        prompt = self._build_prompt(text, section_type, relevant_docs)
        
        # 3. LLM í˜¸ì¶œ
        result = await self.rag_chain.invoke(prompt)
        
        # 4. ê²°ê³¼ íŒŒì‹±
        parsed = self._parse_llm_response(result)
        
        # 5. DB ì €ì¥
        report = Report(
            user_id=user_id,
            section_type=section_type,
            original_text=text,
            polished_text=parsed['polished_text'],
            quality_score=parsed['quality_score'],
            changes_summary=parsed
        )
        self.db.add(report)
        await self.db.commit()
        
        return PolishResponse(**parsed)
```

**ì™„ë£Œ ê¸°ì¤€:**
- [ ] POST /api/reports/polish êµ¬í˜„
- [ ] ì—ëŸ¬ í•¸ë“¤ë§ (400, 401, 500)
- [ ] ë¡œê¹… ì¶”ê°€ (ìš”ì²­/ì‘ë‹µ ê¸°ë¡)
- [ ] Postman í…ŒìŠ¤íŠ¸ í†µê³¼

**ì˜ˆìƒ ì‹œê°„:** 6ì‹œê°„ (Day 4 ì˜¤í›„)

---

#### **Task 6: í’ˆì§ˆ í‰ê°€ API**

**ëª©í‘œ:** `/api/reports/score` POST ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„

**API ìŠ¤í™:**

**ìš”ì²­:**
```http
POST /api/reports/score
Content-Type: application/json

{
  "text": "ë‹¹ì‚¬ëŠ” 2024ë…„ Scope 1+2 ë°°ì¶œëŸ‰ 15% ê°ì¶•...",
  "section_type": "environmental"
}
```

**ì‘ë‹µ:**
```json
{
  "total_score": 85.5,
  "dimension_scores": {
    "completeness": 18,      // ì™„ì „ì„± (0-20ì )
    "accuracy": 17,          // ì •í™•ì„± (0-20ì )
    "balance": 16,           // ê· í˜•ì„± (0-20ì )
    "clarity": 17,           // ëª…í™•ì„± (0-20ì )
    "comparability": 17.5    // ë¹„êµê°€ëŠ¥ì„± (0-20ì )
  },
  "strengths": [
    "ì •ëŸ‰ ì§€í‘œê°€ ëª…í™•í•¨",
    "ëª©í‘œ ì—°ë„ê°€ êµ¬ì²´ì "
  ],
  "improvements": [
    "ì „ë…„ ëŒ€ë¹„ ë¹„êµ ë°ì´í„° ë¶€ì¡±",
    "ì´í•´ê´€ê³„ì ì˜í–¥ ì–¸ê¸‰ ì—†ìŒ"
  ],
  "gri_compliance": 75.0  // GRI ì¤€ìˆ˜ë„ (%)
}
```

**í‰ê°€ ë¡œì§:**
```python
async def calculate_quality_score(self, text: str, section_type: str) -> dict:
    prompt = f"""
    ë‹¤ìŒ ESG ë³´ê³ ì„œ í…ìŠ¤íŠ¸ì˜ í’ˆì§ˆì„ í‰ê°€í•˜ì„¸ìš”.
    
    í…ìŠ¤íŠ¸: {text}
    ì„¹ì…˜: {section_type}
    
    í‰ê°€ ê¸°ì¤€ (ê° 0-20ì ):
    1. ì™„ì „ì„±: í•„ìˆ˜ ì •ë³´ í¬í•¨ ì—¬ë¶€
    2. ì •í™•ì„±: ì •ëŸ‰ ë°ì´í„°ì˜ ì •í™•ì„±
    3. ê· í˜•ì„±: ê¸ì •/ë¶€ì • ëª¨ë‘ ì–¸ê¸‰
    4. ëª…í™•ì„±: ì´í•´í•˜ê¸° ì‰¬ìš´ ë¬¸ì¥
    5. ë¹„êµê°€ëŠ¥ì„±: ì „ë…„ ëŒ€ë¹„ ë°ì´í„°
    
    JSON í˜•ì‹ìœ¼ë¡œ ë‹µë³€í•˜ì„¸ìš”.
    """
    
    result = await self.rag_chain.invoke(prompt)
    return self._parse_score_response(result)
```

**ì™„ë£Œ ê¸°ì¤€:**
- [ ] POST /api/reports/score êµ¬í˜„
- [ ] 5ê°œ ì°¨ì› í‰ê°€ ë¡œì§
- [ ] ê°œì„  ì œì•ˆ ìë™ ìƒì„±
- [ ] 10ê°œ ìƒ˜í”Œ í…ŒìŠ¤íŠ¸ í†µê³¼

**ì˜ˆìƒ ì‹œê°„:** 4ì‹œê°„ (Day 5 ì˜¤ì „)

---

#### **Task 7: í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ê´€ë¦¬**

**ëª©í‘œ:** ì„¹ì…˜ë³„ ìµœì í™”ëœ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ì‘ì„± ë° ê´€ë¦¬

**í”„ë¡¬í”„íŠ¸ íŒŒì¼ êµ¬ì¡° (prompts.py):**
```python
SECTION_PROMPTS = {
    "environmental": """
    ë‹¹ì‹ ì€ TCFD ì „ë¬¸ê°€ì…ë‹ˆë‹¤.
    
    ì°¸ê³  ìë£Œ:
    {context}
    
    ë‹¤ìŒ í™˜ê²½(E) ì„¹ì…˜ì„ ê°œì„ í•˜ì„¸ìš”:
    {text}
    
    í•„ìˆ˜ í¬í•¨ ì‚¬í•­:
    1. Scope 1, 2, 3 ë°°ì¶œëŸ‰ êµ¬ë¶„
    2. íƒ„ì†Œì¤‘ë¦½ ëª©í‘œ ì—°ë„ (ì˜ˆ: 2050ë…„)
    3. ì¬ìƒì—ë„ˆì§€ ì „í™˜ìœ¨ (%)
    4. ì „ë…„ ëŒ€ë¹„ ì¦ê°ë¥ 
    5. GRI 305 (ë°°ì¶œ) ì§€í‘œ ë§¤í•‘
    
    ì¶œë ¥ í˜•ì‹: JSON
    """,
    
    "social": """
    ë‹¹ì‹ ì€ GRI 400 ì‹œë¦¬ì¦ˆ (ì‚¬íšŒ) ì „ë¬¸ê°€ì…ë‹ˆë‹¤.
    
    ì°¸ê³  ìë£Œ:
    {context}
    
    ë‹¤ìŒ ì‚¬íšŒ(S) ì„¹ì…˜ì„ ê°œì„ í•˜ì„¸ìš”:
    {text}
    
    í•„ìˆ˜ í¬í•¨ ì‚¬í•­:
    1. ì„ì§ì› ë‹¤ì–‘ì„± ì§€í‘œ (ì—¬ì„± ë¹„ìœ¨, %)
    2. ì¥ì• ì¸ ê³ ìš©ë¥  (ë²•ì • ì˜ë¬´ ëŒ€ë¹„)
    3. êµìœ¡ ì‹œê°„ (1ì¸ë‹¹ í‰ê· )
    4. ì‚°ì—…ì¬í•´ìœ¨
    5. GRI 401, 404, 405 ì§€í‘œ ë§¤í•‘
    
    ì¶œë ¥ í˜•ì‹: JSON
    """,
    
    "governance": """
    ë‹¹ì‹ ì€ ê¸°ì—… ê±°ë²„ë„ŒìŠ¤ ì „ë¬¸ê°€ì…ë‹ˆë‹¤.
    
    ì°¸ê³  ìë£Œ:
    {context}
    
    ë‹¤ìŒ ê±°ë²„ë„ŒìŠ¤(G) ì„¹ì…˜ì„ ê°œì„ í•˜ì„¸ìš”:
    {text}
    
    í•„ìˆ˜ í¬í•¨ ì‚¬í•­:
    1. ì´ì‚¬íšŒ êµ¬ì„± (ë…ë¦½ì´ì‚¬ ë¹„ìœ¨)
    2. ESG ìœ„ì›íšŒ í™œë™ (ì—°ê°„ íšŒì˜ íšŸìˆ˜)
    3. ë‚´ë¶€ ê³ ë°œ ì œë„ ìš´ì˜
    4. ìœ¤ë¦¬ êµìœ¡ ì´ìˆ˜ìœ¨
    5. GRI 205, 206 ì§€í‘œ ë§¤í•‘
    
    ì¶œë ¥ í˜•ì‹: JSON
    """
}

QUALITY_SCORING_PROMPT = """
ë‹¤ìŒ í…ìŠ¤íŠ¸ì˜ í’ˆì§ˆì„ í‰ê°€í•˜ì„¸ìš”.

ì°¸ê³  ìë£Œ (ìš°ìˆ˜ ì‚¬ë¡€):
{context}

í‰ê°€ ëŒ€ìƒ:
{text}

ì„¹ì…˜: {section_type}

í‰ê°€ ê¸°ì¤€ (ê° 0-20ì ):
1. ì™„ì „ì„± (Completeness): í•„ìˆ˜ ì •ë³´ í¬í•¨ ì—¬ë¶€
   - GRI í•„ìˆ˜ ì§€í‘œ í¬í•¨
   - ëª©í‘œì™€ ì‹¤ì  ëª¨ë‘ ì–¸ê¸‰
   
2. ì •í™•ì„± (Accuracy): ì •ëŸ‰ ë°ì´í„°ì˜ ì •í™•ì„±
   - ìˆ˜ì¹˜ì˜ êµ¬ì²´ì„±
   - ë‹¨ìœ„ ëª…ì‹œ
   
3. ê· í˜•ì„± (Balance): ê¸ì •/ë¶€ì • ëª¨ë‘ ì–¸ê¸‰
   - ì„±ê³¼ì™€ í•œê³„ ë™ì‹œ ì„œìˆ 
   - ê°œì„  ê³„íš í¬í•¨
   
4. ëª…í™•ì„± (Clarity): ì´í•´í•˜ê¸° ì‰¬ìš´ ë¬¸ì¥
   - ì „ë¬¸ ìš©ì–´ ì„¤ëª…
   - ë¬¸ì¥ ê¸¸ì´ ì ì ˆ
   
5. ë¹„êµê°€ëŠ¥ì„± (Comparability): ì „ë…„ ëŒ€ë¹„ ë°ì´í„°
   - ì‹œê³„ì—´ ë°ì´í„°
   - ë™ì¢… ì—…ê³„ ë²¤ì¹˜ë§ˆí¬

JSON í˜•ì‹ìœ¼ë¡œ ë‹µë³€:
{
    "total_score": 85.5,
    "dimension_scores": {...},
    "strengths": [...],
    "improvements": [...],
    "gri_compliance": 75.0
}
"""
```

**í”„ë¡¬í”„íŠ¸ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ (10ê°œ):**
```python
TEST_CASES = [
    {
        "id": "env_001",
        "text": "ìš°ë¦¬ íšŒì‚¬ëŠ” íƒ„ì†Œë¥¼ ì¤„ì´ê³  ìˆìŠµë‹ˆë‹¤.",
        "section": "environmental",
        "expected_improvements": [
            "ì •ëŸ‰ ì§€í‘œ ì¶”ê°€",
            "ëª©í‘œ ì—°ë„ ëª…ì‹œ",
            "Scope êµ¬ë¶„"
        ]
    },
    # ... 9ê°œ ë”
]
```

**ì™„ë£Œ ê¸°ì¤€:**
- [ ] 3ê°œ ì„¹ì…˜ë³„ í”„ë¡¬í”„íŠ¸ ì‘ì„±
- [ ] í’ˆì§ˆ í‰ê°€ í”„ë¡¬í”„íŠ¸ ì‘ì„±
- [ ] 10ê°œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¡œ ê²€ì¦
- [ ] Few-shot ì˜ˆì‹œ 3ê°œ ì¶”ê°€

**ì˜ˆìƒ ì‹œê°„:** 4ì‹œê°„ (Day 5 ì˜¤í›„)

---

### 2.3 í”„ë¡ íŠ¸ì—”ë“œ UI ê°œë°œ

#### **Task 8: ë³´ê³ ì„œ ì—ë””í„° í˜ì´ì§€**

**ëª©í‘œ:** `/app/reports/polish` í˜ì´ì§€ ìƒì„±

**í˜ì´ì§€ êµ¬ì¡°:**
```
/app/reports/
â”œâ”€â”€ layout.tsx           # ë³´ê³ ì„œ ë ˆì´ì•„ì›ƒ
â”œâ”€â”€ polish/
â”‚   â”œâ”€â”€ page.tsx         # ë©”ì¸ í˜ì´ì§€
â”‚   â””â”€â”€ loading.tsx      # ë¡œë”© ìƒíƒœ
```

**UI êµ¬ì„±:**
```tsx
// app/reports/polish/page.tsx
export default function ReportPolishPage() {
  return (
    
      ESG ë³´ê³ ì„œ ìœ¤ë¬¸
      
      {/* ì„¹ì…˜ ì„ íƒ */}
      
      
      {/* í…ìŠ¤íŠ¸ ì…ë ¥ ì—ë””í„° */}
      
      
      {/* ìœ¤ë¬¸ ë²„íŠ¼ */}
      
      
      {/* Before/After ë¹„êµ */}
      
      
      {/* í’ˆì§ˆ ì ìˆ˜ */}
      
    
  );
}
```

**ì„¹ì…˜ ì„ íƒ ì»´í¬ë„ŒíŠ¸:**
```tsx
// components/reports/SectionSelector.tsx
const sections = [
  { value: 'environmental', label: 'í™˜ê²½ (E)', icon: 'ğŸŒ' },
  { value: 'social', label: 'ì‚¬íšŒ (S)', icon: 'ğŸ‘¥' },
  { value: 'governance', label: 'ê±°ë²„ë„ŒìŠ¤ (G)', icon: 'âš–ï¸' }
];

export function SectionSelector() {
  const [selected, setSelected] = useState('environmental');
  
  return (
    
      {sections.map(section => (
        <button
          key={section.value}
          onClick={() => setSelected(section.value)}
          className={cn(
            "px-6 py-3 rounded-lg",
            selected === section.value && "bg-primary text-white"
          )}
        >
          {section.icon} {section.label}
        
      ))}
    
  );
}
```

**í…ìŠ¤íŠ¸ ì—ë””í„°:**
```tsx
// components/reports/TextEditor.tsx
export function TextEditor() {
  const [text, setText] = useState('');
  
  return (
    
      
        ì›ë³¸ í…ìŠ¤íŠ¸ ì…ë ¥
      
      <textarea
        value={text}
        onChange={(e) => setText(e.target.value)}
        className="w-full h-48 p-4 border rounded-lg"
        placeholder="ESG ë³´ê³ ì„œ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."
      />
      
        {text.length} / 10,000 ì
      
    
  );
}
```

**ì™„ë£Œ ê¸°ì¤€:**
- [ ] í˜ì´ì§€ ë¼ìš°íŒ… ì„¤ì •
- [ ] ì„¹ì…˜ ì„ íƒ UI
- [ ] í…ìŠ¤íŠ¸ ì…ë ¥ ì—ë””í„°
- [ ] ë°˜ì‘í˜• ë””ìì¸ (ëª¨ë°”ì¼ ëŒ€ì‘)

**ì˜ˆìƒ ì‹œê°„:** 6ì‹œê°„ (Day 6 ì˜¤ì „~ì˜¤í›„)

---

#### **Task 9: Before/After ë¹„êµ ì»´í¬ë„ŒíŠ¸**

**ëª©í‘œ:** ì›ë³¸ê³¼ ê°œì„ ëœ í…ìŠ¤íŠ¸ë¥¼ ë¹„êµí•˜ëŠ” UI

**ì»´í¬ë„ŒíŠ¸ êµ¬í˜„:**
```tsx
// components/reports/ComparisonView.tsx
import { diffWords } from 'diff';

interface ComparisonViewProps {
  original: string;
  polished: string;
  changes: string[];
}

export function ComparisonView({ original, polished, changes }: ComparisonViewProps) {
  const diff = diffWords(original, polished);
  
  return (
    <div className="grid grid-cols-2 gap-6 mb-6">
      {/* ì›ë³¸ */}
      <div className="border rounded-lg p-6">
        <h3 className="text-lg font-semibold mb-4">ğŸ“„ ì›ë³¸</h3>
        <div className="prose">{original}</div>
      </div>
      
      {/* ê°œì„ ë¨ */}
      <div className="border rounded-lg p-6 bg-green-50">
        <h3 className="text-lg font-semibold mb-4">âœ¨ ê°œì„ ë¨</h3>
        <div className="prose">
          {diff.map((part, i) => (
            <span
              key={i}
              className={cn(
                part.added && "bg-green-200 font-medium",
                part.removed && "bg-red-200 line-through"
              )}
            >
              {part.value}
            </span>
          ))}
        </div>
      </div>
      
      {/* ë³€ê²½ ì‚¬í•­ ìš”ì•½ */}
      <div className="col-span-2 